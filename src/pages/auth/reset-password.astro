---
import AuthLayout from '@/layouts/AuthLayout.astro';
import ResetPasswordForm from '@/features/auth/components/ResetPasswordForm.vue';
import BaseTypography from '@/shared/components/BaseTypography.vue';

// Check if user is already authenticated and redirect
const { user } = Astro.locals;
if (user) {
  return Astro.redirect('/dj/dashboard');
}
---

<AuthLayout
  title="Reset Password"
  subtitle="Enter your email address and we'll send you a link to reset your password"
>
  <!-- Password Reset Form -->
  <ResetPasswordForm client:load />

  <!-- Instructions -->
  <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6">
    <div class="flex">
      <i class="pi pi-info-circle text-blue-400 text-xl mt-0.5"></i>
      <div class="ml-3">
        <BaseTypography variant="body-small" color="primary" client:load>
          <strong>How it works:</strong> We'll email you a secure link to reset your
          password. Check your spam folder if you don't see it in your inbox within
          a few minutes.
        </BaseTypography>
      </div>
    </div>
  </div>

  <!-- Footer slot with additional links -->
  <div slot="footer" class="space-y-2">
    <BaseTypography variant="caption" color="muted" client:load>
      <a
        href="/"
        class="font-medium text-gray-600 hover:text-gray-500 transition-colors"
      >
        ‚Üê Back to home
      </a>
    </BaseTypography>
  </div>
</AuthLayout>
